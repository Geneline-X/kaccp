# Script to add missing translation keys to all language admin.json files

$translations = @{
    "es" = @{
        "loadUserFailed" = "Error al cargar el usuario"
        "loadLanguagesFailed" = "Error al cargar los idiomas"
        "saveLanguagesFailed" = "Error al guardar los idiomas"
        "nameExample" = "Sierra Leona"
        "codeExample" = "kri"
        "nameExampleLang" = "Krio"
        "nativeNamePlaceholder" = "Cómo se llama en el idioma"
        "createFailed" = "Error al crear la indicación"
        "fileEmpty" = "El archivo está vacío"
        "noValidRows" = "No se encontraron filas válidas. Verifica que la columna 'english_text' no esté vacía."
        "importFailed" = "Error al importar indicaciones"
        "deleteConfirm" = "¿Estás seguro de que quieres eliminar esta indicación? Esta acción no se puede deshacer."
        "deleteFailed" = "Error al eliminar la indicación"
        "bulkDeleteFailed" = "Error en la eliminación masiva"
        "bulkDeleteError" = "Error al ejecutar la eliminación masiva"
        "noPromptsToExport" = "No hay indicaciones para exportar que coincidan con los filtros actuales"
        "exportFailed" = "Error al exportar indicaciones"
        "unauthorized" = "No autorizado"
        "submitFailed" = "Error al enviar la revisión"
        "flagReasonPrompt" = "Ingresa el motivo de la marca (ej: RUIDO, NO_CLARO, MUY_BAJO, IDIOMA_INCORRECTO):"
        "flagSuccess" = "Grabación marcada exitosamente"
        "flagFailed" = "Error al marcar la grabación"
        "flagError" = "Error al marcar la grabación"
        "approveConfirm" = "¿Aprobar esta grabación?"
        "approveSuccess" = "Grabación aprobada"
        "approveFailed" = "Error al aprobar la grabación"
        "approveError" = "Error al aprobar la grabación"
        "rejectConfirm" = "¿Rechazar esta grabación? Esta acción no se puede deshacer."
        "rejectSuccess" = "Grabación rechazada"
        "rejectFailed" = "Error al rechazar la grabación"
        "rejectError" = "Error al rechazar la grabación"
        "transcribeConfirm" = "¿Activar la transcripción Kay X para esta grabación?"
        "transcribeSuccess" = "¡Transcripción exitosa!"
        "transcribeFailed" = "Error en la transcripción"
        "transcribeError" = "Error al activar la transcripción"
        "transcribeTitle" = "Transcribir con Kay X"
        "flagTitle" = "Marcar problema"
        "page" = "Página"
        "of" = "de"
        "total" = "total"
        "unknown" = "Desconocido"
        "fetchFailed" = "Error al obtener datos de exportación"
    }
    "de" = @{
        "loadUserFailed" = "Fehler beim Laden des Benutzers"
        "loadLanguagesFailed" = "Fehler beim Laden der Sprachen"
        "saveLanguagesFailed" = "Fehler beim Speichern der Sprachen"
        "nameExample" = "Sierra Leone"
        "codeExample" = "kri"
        "nameExampleLang" = "Krio"
        "nativeNamePlaceholder" = "Wie es in der Sprache genannt wird"
        "createFailed" = "Fehler beim Erstellen der Aufforderung"
        "fileEmpty" = "Datei ist leer"
        "noValidRows" = "Keine gültigen Zeilen gefunden. Überprüfen Sie, ob die Spalte 'english_text' nicht leer ist."
        "importFailed" = "Fehler beim Importieren von Aufforderungen"
        "deleteConfirm" = "Sind Sie sicher, dass Sie diese Aufforderung löschen möchten? Diese Aktion kann nicht rückgängig gemacht werden."
        "deleteFailed" = "Fehler beim Löschen der Aufforderung"
        "bulkDeleteFailed" = "Fehler beim Massenlöschen"
        "bulkDeleteError" = "Fehler beim Ausführen des Massenlöschens"
        "noPromptsToExport" = "Keine Aufforderungen zum Exportieren, die den aktuellen Filtern entsprechen"
        "exportFailed" = "Fehler beim Exportieren von Aufforderungen"
        "unauthorized" = "Nicht autorisiert"
        "submitFailed" = "Fehler beim Einreichen der Überprüfung"
        "flagReasonPrompt" = "Grund für die Kennzeichnung eingeben (z.B. LÄRM, UNKLAR, ZU_LEISE, FALSCHE_SPRACHE):"
        "flagSuccess" = "Aufnahme erfolgreich gekennzeichnet"
        "flagFailed" = "Fehler beim Kennzeichnen der Aufnahme"
        "flagError" = "Fehler beim Kennzeichnen der Aufnahme"
        "approveConfirm" = "Diese Aufnahme genehmigen?"
        "approveSuccess" = "Aufnahme genehmigt"
        "approveFailed" = "Fehler beim Genehmigen der Aufnahme"
        "approveError" = "Fehler beim Genehmigen der Aufnahme"
        "rejectConfirm" = "Diese Aufnahme ablehnen? Diese Aktion kann nicht rückgängig gemacht werden."
        "rejectSuccess" = "Aufnahme abgelehnt"
        "rejectFailed" = "Fehler beim Ablehnen der Aufnahme"
        "rejectError" = "Fehler beim Ablehnen der Aufnahme"
        "transcribeConfirm" = "Kay X-Transkription für diese Aufnahme auslösen?"
        "transcribeSuccess" = "Transkription erfolgreich!"
        "transcribeFailed" = "Transkription fehlgeschlagen"
        "transcribeError" = "Fehler beim Auslösen der Transkription"
        "transcribeTitle" = "Mit Kay X transkribieren"
        "flagTitle" = "Problem kennzeichnen"
        "page" = "Seite"
        "of" = "von"
        "total" = "gesamt"
        "unknown" = "Unbekannt"
        "fetchFailed" = "Fehler beim Abrufen der Exportdaten"
    }
    "it" = @{
        "loadUserFailed" = "Impossibile caricare l'utente"
        "loadLanguagesFailed" = "Impossibile caricare le lingue"
        "saveLanguagesFailed" = "Impossibile salvare le lingue"
        "nameExample" = "Sierra Leone"
        "codeExample" = "kri"
        "nameExampleLang" = "Krio"
        "nativeNamePlaceholder" = "Come si chiama nella lingua"
        "createFailed" = "Impossibile creare il prompt"
        "fileEmpty" = "Il file è vuoto"
        "noValidRows" = "Nessuna riga valida trovata. Verifica che la colonna 'english_text' non sia vuota."
        "importFailed" = "Impossibile importare i prompt"
        "deleteConfirm" = "Sei sicuro di voler eliminare questo prompt? Questa azione non può essere annullata."
        "deleteFailed" = "Impossibile eliminare il prompt"
        "bulkDeleteFailed" = "Eliminazione di massa fallita"
        "bulkDeleteError" = "Errore nell'esecuzione dell'eliminazione di massa"
        "noPromptsToExport" = "Nessun prompt da esportare corrispondente ai filtri attuali"
        "exportFailed" = "Impossibile esportare i prompt"
        "unauthorized" = "Non autorizzato"
        "submitFailed" = "Impossibile inviare la revisione"
        "flagReasonPrompt" = "Inserisci il motivo della segnalazione (es: RUMORE, NON_CHIARO, TROPPO_BASSO, LINGUA_SBAGLIATA):"
        "flagSuccess" = "Registrazione segnalata con successo"
        "flagFailed" = "Impossibile segnalare la registrazione"
        "flagError" = "Errore nella segnalazione della registrazione"
        "approveConfirm" = "Approvare questa registrazione?"
        "approveSuccess" = "Registrazione approvata"
        "approveFailed" = "Impossibile approvare la registrazione"
        "approveError" = "Errore nell'approvazione della registrazione"
        "rejectConfirm" = "Rifiutare questa registrazione? Questa azione non può essere annullata."
        "rejectSuccess" = "Registrazione rifiutata"
        "rejectFailed" = "Impossibile rifiutare la registrazione"
        "rejectError" = "Errore nel rifiuto della registrazione"
        "transcribeConfirm" = "Attivare la trascrizione Kay X per questa registrazione?"
        "transcribeSuccess" = "Trascrizione riuscita!"
        "transcribeFailed" = "Trascrizione fallita"
        "transcribeError" = "Errore nell'attivazione della trascrizione"
        "transcribeTitle" = "Trascrivi con Kay X"
        "flagTitle" = "Segnala problema"
        "page" = "Pagina"
        "of" = "di"
        "total" = "totale"
        "unknown" = "Sconosciuto"
        "fetchFailed" = "Impossibile recuperare i dati di esportazione"
    }
    "zh" = @{
        "loadUserFailed" = "加载用户失败"
        "loadLanguagesFailed" = "加载语言失败"
        "saveLanguagesFailed" = "保存语言失败"
        "nameExample" = "塞拉利昂"
        "codeExample" = "kri"
        "nameExampleLang" = "克里奥语"
        "nativeNamePlaceholder" = "该语言的本地名称"
        "createFailed" = "创建提示失败"
        "fileEmpty" = "文件为空"
        "noValidRows" = "未找到有效行。请检查'english_text'列不为空。"
        "importFailed" = "导入提示失败"
        "deleteConfirm" = "确定要删除此提示吗？此操作无法撤消。"
        "deleteFailed" = "删除提示失败"
        "bulkDeleteFailed" = "批量删除失败"
        "bulkDeleteError" = "执行批量删除失败"
        "noPromptsToExport" = "没有符合当前筛选条件的提示可导出"
        "exportFailed" = "导出提示失败"
        "unauthorized" = "未授权"
        "submitFailed" = "提交审核失败"
        "flagReasonPrompt" = "输入标记原因（例如：噪音、不清楚、太安静、语言错误）："
        "flagSuccess" = "录音标记成功"
        "flagFailed" = "标记录音失败"
        "flagError" = "标记录音时出错"
        "approveConfirm" = "批准此录音？"
        "approveSuccess" = "录音已批准"
        "approveFailed" = "批准录音失败"
        "approveError" = "批准录音时出错"
        "rejectConfirm" = "拒绝此录音？此操作无法撤消。"
        "rejectSuccess" = "录音已拒绝"
        "rejectFailed" = "拒绝录音失败"
        "rejectError" = "拒绝录音时出错"
        "transcribeConfirm" = "触发此录音的 Kay X 转录？"
        "transcribeSuccess" = "转录成功！"
        "transcribeFailed" = "转录失败"
        "transcribeError" = "触发转录时出错"
        "transcribeTitle" = "使用 Kay X 转录"
        "flagTitle" = "标记问题"
        "page" = "页"
        "of" = "的"
        "total" = "总计"
        "unknown" = "未知"
        "fetchFailed" = "获取导出数据失败"
    }
}

Write-Host "Adding missing translation keys to language files..." -ForegroundColor Cyan

foreach ($lang in $translations.Keys) {
    $filePath = "src\messages\$lang\admin.json"
    Write-Host "Processing $filePath..." -ForegroundColor Yellow
    
    # Read the JSON file
    $content = Get-Content $filePath -Raw -Encoding UTF8
    $json = $content | ConvertFrom-Json
    
    # Add missing keys to userDetailPage
    if (-not $json.admin.userDetailPage.loadUserFailed) {
        $json.admin.userDetailPage | Add-Member -MemberType NoteProperty -Name "loadUserFailed" -Value $translations[$lang]["loadUserFailed"]
        $json.admin.userDetailPage | Add-Member -MemberType NoteProperty -Name "loadLanguagesFailed" -Value $translations[$lang]["loadLanguagesFailed"]
        $json.admin.userDetailPage | Add-Member -MemberType NoteProperty -Name "saveLanguagesFailed" -Value $translations[$lang]["saveLanguagesFailed"]
    }
    
    # Add missing keys to countriesPage
    if (-not $json.admin.countriesPage.nameExample) {
        $json.admin.countriesPage | Add-Member -MemberType NoteProperty -Name "nameExample" -Value $translations[$lang]["nameExample"]
    }
    
    # Add missing keys to languagesPage
    if (-not $json.admin.languagesPage.codeExample) {
        $json.admin.languagesPage | Add-Member -MemberType NoteProperty -Name "codeExample" -Value $translations[$lang]["codeExample"]
        $json.admin.languagesPage | Add-Member -MemberType NoteProperty -Name "nameExample" -Value $translations[$lang]["nameExampleLang"]
        $json.admin.languagesPage | Add-Member -MemberType NoteProperty -Name "nativeNamePlaceholder" -Value $translations[$lang]["nativeNamePlaceholder"]
    }
    
    # Add missing keys to promptsPage
    if (-not $json.admin.promptsPage.createFailed) {
        $json.admin.promptsPage | Add-Member -MemberType NoteProperty -Name "createFailed" -Value $translations[$lang]["createFailed"]
        $json.admin.promptsPage | Add-Member -MemberType NoteProperty -Name "fileEmpty" -Value $translations[$lang]["fileEmpty"]
        $json.admin.promptsPage | Add-Member -MemberType NoteProperty -Name "noValidRows" -Value $translations[$lang]["noValidRows"]
        $json.admin.promptsPage | Add-Member -MemberType NoteProperty -Name "importFailed" -Value $translations[$lang]["importFailed"]
        $json.admin.promptsPage | Add-Member -MemberType NoteProperty -Name "deleteConfirm" -Value $translations[$lang]["deleteConfirm"]
        $json.admin.promptsPage | Add-Member -MemberType NoteProperty -Name "deleteFailed" -Value $translations[$lang]["deleteFailed"]
        $json.admin.promptsPage | Add-Member -MemberType NoteProperty -Name "bulkDeleteFailed" -Value $translations[$lang]["bulkDeleteFailed"]
        $json.admin.promptsPage | Add-Member -MemberType NoteProperty -Name "bulkDeleteError" -Value $translations[$lang]["bulkDeleteError"]
        $json.admin.promptsPage | Add-Member -MemberType NoteProperty -Name "noPromptsToExport" -Value $translations[$lang]["noPromptsToExport"]
        $json.admin.promptsPage | Add-Member -MemberType NoteProperty -Name "exportFailed" -Value $translations[$lang]["exportFailed"]
    }
    
    # Add missing keys to reviewPage
    if (-not $json.admin.reviewPage.unauthorized) {
        $json.admin.reviewPage | Add-Member -MemberType NoteProperty -Name "unauthorized" -Value $translations[$lang]["unauthorized"]
        $json.admin.reviewPage | Add-Member -MemberType NoteProperty -Name "submitFailed" -Value $translations[$lang]["submitFailed"]
    }
    
    # Add missing keys to recordingsPage
    if (-not $json.admin.recordingsPage.flagReasonPrompt) {
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "flagReasonPrompt" -Value $translations[$lang]["flagReasonPrompt"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "flagSuccess" -Value $translations[$lang]["flagSuccess"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "flagFailed" -Value $translations[$lang]["flagFailed"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "flagError" -Value $translations[$lang]["flagError"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "approveConfirm" -Value $translations[$lang]["approveConfirm"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "approveSuccess" -Value $translations[$lang]["approveSuccess"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "approveFailed" -Value $translations[$lang]["approveFailed"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "approveError" -Value $translations[$lang]["approveError"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "rejectConfirm" -Value $translations[$lang]["rejectConfirm"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "rejectSuccess" -Value $translations[$lang]["rejectSuccess"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "rejectFailed" -Value $translations[$lang]["rejectFailed"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "rejectError" -Value $translations[$lang]["rejectError"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "transcribeConfirm" -Value $translations[$lang]["transcribeConfirm"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "transcribeSuccess" -Value $translations[$lang]["transcribeSuccess"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "transcribeFailed" -Value $translations[$lang]["transcribeFailed"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "transcribeError" -Value $translations[$lang]["transcribeError"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "transcribeTitle" -Value $translations[$lang]["transcribeTitle"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "flagTitle" -Value $translations[$lang]["flagTitle"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "page" -Value $translations[$lang]["page"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "of" -Value $translations[$lang]["of"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "total" -Value $translations[$lang]["total"]
        $json.admin.recordingsPage | Add-Member -MemberType NoteProperty -Name "unknown" -Value $translations[$lang]["unknown"]
    }
    
    # Add missing keys to exportPage
    if (-not $json.admin.exportPage.fetchFailed) {
        $json.admin.exportPage | Add-Member -MemberType NoteProperty -Name "fetchFailed" -Value $translations[$lang]["fetchFailed"]
    }
    
    # Save the updated JSON
    $json | ConvertTo-Json -Depth 10 | Set-Content $filePath -Encoding UTF8 -NoNewline
    Write-Host "✓ Updated $filePath" -ForegroundColor Green
}

Write-Host "`nAll translation keys added successfully!" -ForegroundColor Green
